## CSV Parsers

CSV формат широко известен. Он много где применяется, например, в Excel.

Файлы в таком формате *могут* иметь заголовок, описывающий столбцы.

1. OpenCSV
Парсер не обновлялся с 2011-го года.
Данный парсер позволяет парсить файл строчку за строчкой, а также получить сразу все, что бывает полезно, если, например, размер файла небольшой, 
то можно сразу считать все в память и вернуть коллекцию записей.
2. SuperCSV
Насколько я понял - это как раз продолжение идей OpenCSV, библиотека написана на Java8, 
поддерживает большое количество плюшек, таких как cell processor, когда вы сразу значения столбца 
преобразовываете в тип и т.д
3. Apache Commons CSV
Как пишут авторы на официальном сайте - они хотели создать наиболее простой инструмент для работы

#### Как проверяем быстроедйствие?
CSV файл состоит из заголовка(опционально) и значений разделенных запятой.
Рассматривать будем файлы, количество столбцов которых одинаково и не имеющих заголовок.

Будем рассматривать файлы количество столбцов у которых: 10, 50, 100, 1000.
Количество строк будет 10, 100, 1000, 10_000, 100_000 соответственно.

В отчет войдет размер файла, количество столбцов, количество строк, время обработки и среднее время обработки.
Время обработки будем рассчитывать следующим образом:
Парсим файл N раз, где N - близкое к 200к раз, далее выбираем N/2 время.
  
[Код для тестов](../../../code-examples/src/main/java/compare/parsers/csv/RunTests.java)

Если провести тесты, то можно увидеть, что файл:
`
Generate file with 300 columns, 100000 rows.
File size is 583.2543020248413 mb
`
Парсится за(при использовании буффера в 8 мб): 
`
SuperCSVTests - File: Median: 7949 mills, average: 7666.725490196079 mills
OpenCSVTests - File: Median: 8530 mills, average: 8794.64705882353 mills
ApacheCommonsCSVTests - File: Median: 7622 mills, average: 7777.686274509804 mills
`

А файл:
`
Generate file with 50 columns, 100000 rows.
File size is 97.36812686920166 mb
`

Парсится за:
`
ApacheCommonsCSVTests - File: Median: 1501 mills, average: 1519.9607843137255 mills
OpenCSVTests - File: Median: 1648 mills, average: 1835.0392156862745 mills
SuperCSVTests - File: Median: 1261 mills, average: 1425.9607843137255 mills
`

Видно, что SuperCSV библиотека быстрее. Поэтому в ее пользу я и сделал выбор.

Надо отметить также, что, конечно, это очень синтетические тесты, по хорошему бы надо использовать бенчмарк.
Но все же, я считаю, что можно утверждать, что выбранная библиотека быстрее, так как я делал несколько тестов на разных машинах, меняя очередность запуска каждого.
Поэтому, выбор был сделан в пользу **SuperCSV**, а учитывая, 
что данная библиотека предоставляет еще большое количество дополнительных 'плюшек', то можно рекомендовать библиотеку к использованию.